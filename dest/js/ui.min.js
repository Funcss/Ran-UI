"use strict";function fullScreen(){var e=document.documentElement,t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;void 0!==t&&t&&t.call(e)}function exitScreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),"undefined"!=typeof cfs&&cfs&&cfs.call(el)}function debounce(n,i,l){var a;return function(){var e=this,t=arguments,o=l&&!a;clearTimeout(a),a=setTimeout(function(){a=null,l||n.apply(e,t)},i),o&&n.apply(e,t)}}function MUIinput(){for(var e=document.getElementsByClassName("MUIinput"),t=0;t<e.length;t++)e[t].onfocus=function(){this.closest(".input-MUITitle").classList.add("focus")},e[t].onblur=function(){this.value||this.closest(".input-MUITitle").classList.remove("focus")}}function stop(e){e.forEach(function(e){document.querySelectorAll(e).forEach(function(e){e.onclick=function(e){e.stopPropagation()}})})}function tabs(){document.querySelectorAll(".tabs").forEach(function(t){t.querySelectorAll("a").forEach(function(e){e.matches(".active")&&(e.parentElement.style.setProperty("--target-width",e.clientWidth),e.parentElement.style.setProperty("--target-height",e.clientHeight),e.parentElement.style.setProperty("--target-left",e.offsetLeft),e.parentElement.style.setProperty("--target-top",e.offsetTop)),e.onclick=function(){t.querySelector(".active")&&t.querySelector(".active").classList.remove("active"),this.classList.add("active"),this.parentElement.style.setProperty("--target-width",this.clientWidth),this.parentElement.style.setProperty("--target-height",this.clientHeight),this.parentElement.style.setProperty("--target-left",this.offsetLeft),this.parentElement.style.setProperty("--target-top",this.offsetTop)}})})}function range(){document.querySelectorAll(".range").forEach(function(o){var n,i,e=o.querySelector(".range-drap");e.onmousedown=function(e){i=o.clientWidth,n=e.clientX},e.onmouseout=function(){return!1},e.onmousemove=function(e){var t=e.clientX;return o.style.setProperty("--range",(t-n)/i*100),e.preventDefault&&e.preventDefault(),!1}})}function dragMove(e,t){var o,n;e.onmousedown=function(){this.classList.add("dragMove"),o=this.scrollLeft,e.onmousemove=function(){n=this.scrollLeft},e.onmouseup=function(){this.classList.remove("dragMove"),10<n-o&&n-o<t&&(this.scrollLeft=o+t),10<n-o&&t<=n-o&&(this.scrollLeft=n),n-o<=10&&-10<=n-o&&(this.scrollLeft=o),n-o<-10&&-t<n-o&&(this.scrollLeft=o-t),n-o<-10&&n-o<-t&&(this.scrollLeft=n)}}}function listShow(e){anime({targets:e,duration:400,easing:"cubicBezier(0, 0, 0.2, 1)",translateX:[-10,0],opacity:[0,1],delay:anime.stagger(56)})}function drawerRightStack(e){var t=document.querySelector(".drawer-right-show");t&&t!=e?anime({targets:t,scale:.92,opacity:0,zIndex:[1,1],easing:"cubicBezier(0, 0, 0.2, 1)",duration:300,begin:function(){t.style.willChange="transform, opacity",e.style.willChange="transform, opacity",e.classList.add("drawer-right-show")},complete:function(){e.style.willChange="auto",t.setAttribute("style","bar"),t.classList.remove("drawer-right-show")}}):e.classList.add("drawer-right-show")}function drawerLeftStack(e){var t=document.querySelector(".drawer-left-show");t&&t!=e?anime({targets:t,scale:.92,opacity:0,zIndex:[1,1],easing:"cubicBezier(0, 0, 0.2, 1)",duration:300,begin:function(){t.style.willChange="transform, opacity",e.style.willChange="transform, opacity",e.classList.add("drawer-left-show")},complete:function(){e.style.willChange="auto",t.removeAttribute("style"),t.classList.remove("drawer-left-show")}}):e.classList.add("drawer-left-show")}function drawerRightClose(){var e=document.querySelector(".drawer-right-show");anime({targets:e,easing:"cubicBezier(0, 0, 0.2, 1)",duration:200,scale:.92,opacity:0,begin:function(){e.style.willChange="transform, opacity"},complete:function(){e.removeAttribute("style"),e.classList.remove("drawer-right-show")}})}function drawerLeftClose(){var e=document.querySelector(".drawer-left-show");anime({targets:e,easing:"cubicBezier(0, 0, 0.2, 1)",duration:200,scale:.92,opacity:0,begin:function(){e.style.willChange="transform, opacity"},complete:function(){e.removeAttribute("style"),e.classList.remove("drawer-left-show")}})}function backdropLoadingShow(e){anime({targets:e,opacity:1,duration:220,easing:"cubicBezier(0, 0, 0.2, 1)",begin:function(){document.querySelector(e).style.visibility="visible",document.documentElement.style.overflow="hidden"}})}function backdropLoadingHide(e){anime({targets:e,opacity:0,duration:220,easing:"cubicBezier(0, 0, 0.2, 1)",begin:function(){document.documentElement.removeAttribute("style")},complete:function(){document.querySelector(e).style.visibility="hidden"}})}function toast(e,t,o,n){t=t||"toastBar",n=n||!0;var i,l,a,s,c,r,d=document.createElement("div");d.classList.add("toast",t),d.innerHTML=e,"leftBottom"==o&&(document.getElementById("toast-leftBottom")?document.getElementById("toast-leftBottom").appendChild(d):((i=document.createElement("div")).classList.add("toastBox"),document.body.appendChild(i),i.id="toast-leftBottom",i.appendChild(d))),"leftTop"==o&&(console.log(this),document.getElementById("toast-leftTop")?document.getElementById("toast-leftTop").appendChild(d):((l=document.createElement("div")).classList.add("toastBox"),document.body.appendChild(l),l.id="toast-leftTop",l.appendChild(d))),"rightTop"==o&&(document.getElementById("toast-rightTop")?document.getElementById("toast-rightTop").appendChild(d):((a=document.createElement("div")).classList.add("toastBox"),document.body.appendChild(a),a.id="toast-rightTop",a.appendChild(d))),"rightBottom"==o&&(document.getElementById("toast-rightBottom")?document.getElementById("toast-rightBottom").appendChild(d):((s=document.createElement("div")).classList.add("toastBox"),document.body.appendChild(s),s.id="toast-rightBottom",s.appendChild(d))),"topCenter"!=o&&""!=o||(document.getElementById("toast-topCenter")?document.getElementById("toast-topCenter").appendChild(d):((c=document.createElement("div")).classList.add("toastBox"),document.body.appendChild(c),c.id="toast-topCenter",c.style.transform="translateX(-50%)",c.appendChild(d))),"bottomCenter"==o&&(document.getElementById("toast-bottomCenter")?document.getElementById("toast-bottomCenter").appendChild(d):((r=document.createElement("div")).classList.add("toastBox"),document.body.appendChild(r),r.id="toast-bottomCenter",r.style.transform="translateX(-50%)",r.appendChild(d))),(n?toastAuto:toastShow)(d)}function toastShow(e){anime({targets:e,easing:"easeOutBack",duration:300,opacity:1,scale:[.8,1],begin:function(){e.style.display="flex"}})}function toastAuto(e){anime({targets:e,easing:"easeOutBack",duration:300,opacity:1,scale:[.8,1],endDelay:1e3,direction:"alternate",begin:function(){e.style.display="flex"},complete:function(){e.remove()}})}function toastHide(e){anime({targets:e,easing:"easeOutBack",duration:300,opacity:0,scale:.8,complete:function(){e.style.display="none"}})}function dialogShow(e){var t=e.querySelector(".dialog");anime({targets:e,duration:220,easing:"cubicBezier(0.4, 0, 0.2, 1)",opacity:1,begin:function(){e.style.visibility="visible",document.documentElement.style.overflow="hidden",t.classList.add("dialogShow")}})}function dialogHide(e){anime({targets:e,easing:"cubicBezier(0.4, 0, 0.2, 1)",duration:220,opacity:0,complete:function(){e.style.visibility="hidden",e.querySelectorAll(".dialog").forEach(function(e){e.removeAttribute("style"),e.setAttribute("class","dialog")}),document.documentElement.removeAttribute("style")}})}function dialogStackNext(e){var t=document.querySelector(".dialogBack"),o=document.querySelector(".dialogShow");t?anime.timeline({}).add({targets:t,begin:function(){t.classList.add("dialogBackHide"),t.classList.remove("dialogBack")},complete:function(){}},0).add({targets:o,begin:function(){o.classList.add("dialogBack"),o.classList.remove("dialogShow")},complete:function(){}},240).add({targets:e,begin:function(){e.classList.remove("dialogPrevHide"),e.classList.add("dialogShow")},complete:function(){}},480):anime.timeline({}).add({targets:o,begin:function(){o.classList.add("dialogBack"),o.classList.remove("dialogShow")},complete:function(){}},0).add({targets:e,begin:function(){e.classList.remove("dialogPrevHide"),e.classList.add("dialogShow")},complete:function(){}},240)}function dialogStackPrev(e){var t=document.querySelector(".dialogBack"),o=document.querySelector(".dialogShow");e?anime.timeline({}).add({targets:o,begin:function(){o.classList.remove("dialogShow")}},0).add({targets:t,begin:function(){t.classList.add("dialogShow"),t.classList.remove("dialogBack")}},240).add({targets:e,begin:function(){e.classList.add("dialogBack"),e.classList.remove("dialogBackHide")}},480):anime.timeline({}).add({targets:o,begin:function(){o.classList.remove("dialogShow")}},0).add({targets:t,begin:function(){t.classList.add("dialogShow"),t.classList.remove("dialogBack")}},240)}function getViewport(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,scrollWidth:Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth),scrollHeight:Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight)}}function getElementInfo(e){var t=e.getBoundingClientRect(),o=t.top,n=t.left,i=getViewport().height-t.bottom,l=getViewport().width-t.right,a=t.top+window.pageYOffset-document.documentElement.clientTop,s=t.left+window.pageXOffset-document.documentElement.clientLeft,c=t.width,r=t.height;return{top:a,left:s,width:c,height:r,centerX:s+c/2,centerY:a+r/2,viewTop:o,viewLeft:n,viewBottom:i,viewRight:l}}function tipsShow(e){anime({targets:e,duration:300,easing:"easeOutBack",scale:[.5,1],opacity:[0,1]})}function tipsHide(e){anime({targets:e,duration:300,easing:"easeOutBack",scale:[1,.5],opacity:[1,0],complete:function(){e.remove()}})}function tooltips(e,t,o){o=o||"top";var n=getElementInfo(e).top,i=getElementInfo(e).left,l=e.clientWidth,a=e.clientHeight,s=getElementInfo(e).centerX,c=getElementInfo(e).centerY,r=getElementInfo(e).viewTop,d=getElementInfo(e).viewLeft,u=getElementInfo(e).viewBottom,m=getElementInfo(e).viewRight,f=document.createElement("div"),p=document.createElement("div");f.classList.add("tooltip"),f.classList.add("tooltip-"+o),p.classList.add("tooltip-info"),p.innerHTML+=t,f.appendChild(p);for(var g=document.getElementsByClassName("tooltip"),h=0;h<g.length;h++)tipsHide(g[h]);document.body.appendChild(f);var y=f.getBoundingClientRect().width+12,v=f.getBoundingClientRect().height+12;"top"==o&&v<r&&(f.style.left=s+"px",f.style.top=n-v+"px",f.style.transform="translateX(-50%)",tipsShow(f)),"top"==o&&r<=v&&(f.classList.remove("tooltip-"+o),f.classList.add("tooltip-bottom"),f.style.left=s+"px",f.style.top=n+a+12+"px",f.style.transform="translateX(-50%)",tipsShow(f)),"bottom"==o&&v<u&&(f.style.left=s+"px",f.style.top=n+a+12+"px",f.style.transform="translateX(-50%)",tipsShow(f)),"bottom"==o&&u<=v&&(f.classList.remove("tooltip-"+o),f.classList.add("tooltip-bottom"),f.style.left=s+"px",f.style.top=n-v+"px",f.style.transform="translateX(-50%)",tipsShow(f)),"left"==o&&y<d&&(f.style.left=i-y+"px",f.style.top=c+"px",f.style.transform="translateY(-50%)",tipsShow(f)),"left"==o&&d<=y&&(f.classList.remove("tooltip-"+o),f.classList.add("tooltip-right"),f.style.left=i+l+12+"px",f.style.top=c+"px",f.style.transform="translateY(-50%)",tipsShow(f)),"right"==o&&y<m&&(f.style.left=i+l+12+"px",f.style.top=c+"px",f.style.transform="translateY(-50%)",tipsShow(f)),"right"==o&&m<=y&&(f.classList.remove("tooltip-"+o),f.classList.add("tooltip-right"),f.style.left=i-y+"px",f.style.top=c+"px",f.style.transform="translateY(-50%)",tipsShow(f)),document.onclick=function(){for(var e=0;e<g.length;e++)tipsHide(g[e])},event.stopPropagation(),f.onclick=function(e){e.stopPropagation()}}function menuShow(e){document.getElementsByClassName("menu");anime({targets:e,duration:100,easing:"cubicBezier(0, 0, 0.2, 1)",scale:[.8,1],opacity:[0,1],begin:function(){e.style.display="block",e.style.visibility="visible"}})}function menuHide(e,t){t=t||0,anime({targets:e,duration:100,delay:t,easing:"cubicBezier(0.4, 0, 0.2, 1)",opacity:[1,0],complete:function(){e.style.display="none",e.style.visibility="hidden",e.classList.remove("menuShow")}})}function menu(l,a){for(var e=getElementInfo(l).top,t=getElementInfo(l).left,o=getElementInfo(l).width,s=getElementInfo(l).height,c=(getElementInfo(l).centerX,getElementInfo(l).centerY,getElementInfo(l).viewTop),n=getElementInfo(l).viewLeft,r=getElementInfo(l).viewBottom,i=getElementInfo(l).viewRight,d=document.getElementsByClassName("menuShow"),u=0;u<d.length;u++)a!=d[u]&&menuHide(d[u]);document.body.appendChild(a),a.style.display="block",a.style.minWidth=o+"px",a.classList.add("menuShow");var m,f,p=a.querySelector(".selected"),g=a.getBoundingClientRect().width,h=a.getBoundingClientRect().height;if(p&&(m=p.clientHeight,f=p.offsetTop,a.scrollTop=f-h/2+m/2),h<=r||c<=h?(a.style.top=e+s+"px",a.style.transformOrigin="center top"):(a.style.top=e-h+"px",a.style.transformOrigin="center bottom"),menuShow(a),g-o+24<i&&(a.style.left=t+"px",a.style.right="auto"),i<g-o+24&&g-o-i+24<n&&(a.style.left="auto",a.style.right="24px"),g>getViewport().width-96&&(a.style.left="24px"),window.addEventListener("resize",debounce(function(){var e=getElementInfo(l).viewLeft,t=getElementInfo(l).viewRight,o=getElementInfo(l).top,n=getElementInfo(l).left,i=getElementInfo(l).width;a.style.top=h<=r||c<=h?o+s+"px":o-h+"px",a.style.minWidth=i+"px",a.style.left=n+i/2+"px",g-i+24<t&&(a.style.left=n+"px",a.style.right="auto"),t<g-i+24&&g-i-t+24<e&&(a.style.left="auto",a.style.right="24px"),g>getViewport().width-96&&(a.style.left="24px")},100)),document.onclick=function(){for(u=0;u<d.length;u++)menuHide(d[u])},event.stopPropagation(),a.onclick=function(e){e.stopPropagation()},l.matches(".menu-select"))for(var y=a.querySelectorAll(".menu-item"),u=0;u<y.length;u++)y[u].onclick=function(){l.textContent=this.textContent,a.querySelector(".selected")&&a.querySelector(".selected").classList.remove("selected"),this.classList.add("selected"),menuHide(a,150)}}function gridResize(e){for(var t=e.ownerDocument.defaultView.getComputedStyle(e,null).gridTemplateColumns.trim().split(/\s+/).length,i=e.clientWidth/t,o=e.querySelectorAll(".grid-resize"),n=new ResizeObserver(function(e){var t=e[0].target,o=t.clientWidth,n=Math.round(o/i);t.style.gridColumn="span "+n,t.parentNode.classList.add("has-resize"),t.onmouseup=function(){this.style.width=""}}),l=0;l<o.length;l++)n.observe(o[l])}function numberShow(){document.querySelectorAll(".numberShow").forEach(function(e){var t,o;t=e.dataset.start?e.dataset.start:0,o=e.dataset.end?e.dataset.end:0;var n=parseFloat(o).countDecimals();anime({targets:e,duration:1e3,easing:"easeOutSine",innerHTML:[t,o],round:Math.pow(10,n)})})}function mediaMatrix(e){var t=e.querySelectorAll(".media-item"),r=e.querySelectorAll("img");t.forEach(function(e,c){e.onclick=function(){var o=document.createElement("div");o.classList.add("media-view"),o.classList.add("dragscroll"),o.insertAdjacentHTML("beforeend",'<div class="media-view-tools"> <a href="javascript:;" class="media-view-prev">上</a> <a href="javascript:;" class="media-view-next">下</a> <a href="javascript:;" class="media-view-toggle">窗</a> <a href="javascript:;" class="media-view-close">关</a> </div>');for(var e=0;e<r.length;e++){var t=document.createElement("div");t.classList.add("media-view-item");var n=document.createElement("img");n.setAttribute("src",r[e].getAttribute("data-img")),n.setAttribute("loading","lazy"),t.appendChild(n),o.appendChild(t),e==c&&t.classList.add("active")}document.body.appendChild(o),o.scrollLeft=o.clientWidth*c;var i=o.querySelector(".media-view-next"),l=o.querySelector(".media-view-prev"),a=o.querySelector(".media-view-close");i.onclick=function(){o.scrollLeft+=o.clientWidth},l.onclick=function(){o.scrollLeft-=o.clientWidth},a.onclick=function(){anime({targets:o,duration:220,easing:"cubicBezier(0, 0, 0.2, 1)",opacity:[1,0],complete:function(){document.body.removeChild(o)}})};var s=null;o.addEventListener("scroll",function(){clearTimeout(s),s=setTimeout(function(){[].slice.call(o.querySelectorAll(".media-view-item")).forEach(function(e,t){t=t||0,Math.abs(e.getBoundingClientRect().left-o.getBoundingClientRect().left)<10?(e.classList.add("active"),l.style.opacity=0==t?"30%":"100%",t==o.querySelectorAll(".media-view-item").length-1?i.style.opacity="30%":i.style.opacity="100%"):e.classList.remove("active")})},100)}),anime({targets:o,duration:300,easing:"cubicBezier(0.4, 0, 0.2, 1)",opacity:[0,1],complete:function(){dragscroll.reset(),dragMove(o,o.clientWidth),o.style.scrollBehavior="smooth"}})}})}function bottomHide(e){anime({targets:e,duration:400,easing:"easeOutBack",translateY:[0,"100%"],opacity:[1,0],complete:function(){e.style.visibility="hidden"}})}function timeTool(e){var o=e.querySelector(".maptool-timeline-list"),t=e.querySelector(".maptool-timeline-next"),n=e.querySelector(".maptool-timeline-prev");anime({targets:e,duration:400,easing:"easeOutBack",translateY:["100%",0],opacity:[0,1],begin:function(){e.style.visibility="visible"},complete:function(){dragMove(o,200),o.querySelectorAll("li").forEach(function(e,t){e.matches(".active")&&(e.parentElement.style.setProperty("--target-width",e.clientWidth),e.parentElement.style.setProperty("--target-height",e.clientHeight),e.parentElement.style.setProperty("--target-left",e.offsetLeft),e.parentElement.style.setProperty("--target-top",e.offsetTop),o.scrollLeft=e.offsetLeft-o.clientWidth/2),e.onclick=function(){o.querySelector(".active")&&o.querySelector(".active").classList.remove("active"),this.classList.add("active"),this.parentElement.style.setProperty("--target-width",this.clientWidth),this.parentElement.style.setProperty("--target-height",this.clientHeight),this.parentElement.style.setProperty("--target-left",this.offsetLeft),this.parentElement.style.setProperty("--target-top",this.offsetTop),o.scrollLeft=this.offsetLeft-o.clientWidth/2}}),t.onclick=function(){o.scrollLeft+=o.clientWidth},n.onclick=function(){o.scrollLeft-=o.clientWidth}}})}function parabolla(e,t,o){var n=getElementInfo(e).top,i=getElementInfo(e).left,l=getElementInfo(t).top,a=getElementInfo(t).left,s=document.createElement("div");s.style.position="absolute",s.style.top=n+"px",s.style.left=i+"px",s.style.width=e.clientWidth+"px",s.style.height=e.clientHeight+"px",s.classList.add(o),document.body.appendChild(s),anime({targets:s,left:{value:a,duration:400,easing:"linear"},top:{value:l,duration:400,easing:"cubicBezier(.6,-1.14,.92,.57)"},opacity:{value:[1,.2],duration:400,easing:"linear"},begin:function(){}})}function pileScroll(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".pile",s=1<arguments.length&&void 0!==arguments[1]&&arguments[1];document.querySelectorAll(e).forEach(function(t){var e=t.querySelectorAll(".pile-item"),o=getComputedStyle(t,null),a=parseInt(o.paddingTop);e.forEach(function(o){var n,i=o.offsetHeight,l=o.offsetTop,e=o.nextElementSibling;e&&(n=e.offsetTop),t.addEventListener("scroll",function(){var e=this.scrollTop+a,t=(i+l-e)/i;l<e&&e<n&&(1==s?(o.style.willChange="transform, opacity",o.style.opacity=t):(o.style.willChange="transform",o.style.opacity=1),o.style.transform="scale("+(.08*t+.92)+")"),n<=e&&(o.style.opacity=0,o.style.transform="scale(0.92)",o.style.willChange=""),e<=l&&(o.style.opacity=1,o.style.transform="scale(1)",o.style.willChange="")})})})}function cardNext(e){anime({targets:e,duration:220,begin:function(){e.classList.add("next")},complete:function(){e.classList.remove("next"),e.parentNode.insertBefore(e,e.parentNode.firstChild),cardStack()}})}function cardPrev(e){anime({targets:e,duration:120,begin:function(){e.classList.add("prev"),e.parentNode.appendChild(e)},complete:function(){e.classList.remove("prev"),cardStack()}})}function cardStack(){document.querySelectorAll(".card-stack").forEach(function(e){var t=e.querySelector(".card-stack-item:first-child"),o=e.querySelector(".card-stack-item:last-child"),n=o.querySelector(".card-next"),i=o.querySelector(".card-prev");n.onclick=function(){cardNext(o)},i.onclick=function(){cardPrev(t)}})}function accordion(){document.querySelectorAll(".accordion-toggle").forEach(function(e){var t=e.closest(".accordion-item").querySelector(".accordion-content"),o=t.querySelector(".accordion-content-info").getBoundingClientRect().height;e.onclick=function(){t.matches(".show")?(t.style.height=0,t.classList.remove("show")):(t.style.height=o+"px",t.classList.add("show"))}})}function compass(){document.querySelectorAll(".compass").forEach(function(o){var n,i,l,a=[getElementInfo(o).centerX,getElementInfo(o).centerY],s=0,c=0;o.onmousedown=function(e){i=[e.pageX,e.pageY];var t=Math.atan2(e.pageX-a[0],-(e.pageY-a[1]))*(180/Math.PI);document.onmousemove=function(e){n=Math.atan2(e.pageX-a[0],-(e.pageY-a[1]))*(180/Math.PI),c=n-(t-s),o.style.transform="rotate("+c+"deg)"},document.onmouseup=function(e){l=[e.pageX,e.pageY],s=i[0]==l[0]&&i[1]==l[1]?(anime({targets:o,duration:200,easing:"cubicBezier(0, 0, 0.2, 1)",rotate:0}),0):c,document.onmouseup=null,document.onmousemove=null}}})}Number.prototype.countDecimals=function(){return Math.floor(this.valueOf())!==this.valueOf()&&this.toString().split(".")[1].length||0},compass();